<button type="submit" class="btn btn-danger-outline col-md-6" onclick="loadContent('./html/AddProductForm.html')" aria-pressed="true">Новый товар</button>
<button type="submit" class="btn btn-danger-outline col-md-6 btn_selected"  aria-pressed="true">Все товары</button>

<div id="Products" class="col-md-12 container" style="margin-top: 5px">
    <div id="PatternProduct">
    <div class="card col-md-3">
        <div class="image">
            <div class="embed-responsive embed-responsive-16by9" style="display: none">
                <iframe  src="@Video" frameborder="0" gesture="media" allow="encrypted-media" allowfullscreen></iframe>
            </div>
            <img class="img-fluid vertical_center" onload="resizeCardProduct()" src="@Image" alt="Image_@NameProduct">
        </div>

        <div class="card-content">
            <div class="card-block">
                <p class=" h4 card-title text-center">@NameProduct</p>
                <p class="card-text">@Description</p>
            </div>

            <div class="input-group">
                <div class="input-group-addon">цена</div>
                <div class="input-group-addon">@Price</div>
                <div class="input-group-addon">&#8381;</div>
            </div>
            <p class="card-text">@Provider</p>
            <div class="input-group purchase">
                <div class="input-group-addon">закуп</div>
                <div class="input-group-addon">@Purchase</div>
                <div class="input-group-addon">&#8381;</div>
            </div>
            <div class="input-group purchase">
                <div class="input-group-addon">прибыль</div>
                <div class="input-group-addon">@Profit</div>
                <div class="input-group-addon">&#8381;</div>
            </div>

            <div class="card-block">
                <button>Изменить</button>
            </div>
        </div>
    </div>
    </div>
</div>
<script>

    var createCardProduct = function () {
        var pattern = $(".card").get(0).outerHTML;
        //console.log(pattern);
        var rsp;
            $.ajax({
            url: "/SelectProducts",
            async:false,


            type: "GET",
            data: "id="+id+"&token="+token,
            success: function (data) {
                if(data.authentication) {
                    rsp = data.products;
                    console.log(data);
                    return rsp;
                }else {

                }
            },
            error: function (xhr, str) {
                console.log("что то пошло не так")
            },
            dataType: "json"
        });


        for(var i=0;i<rsp.length;i++){
            var product  = pattern;
            product = product.replace(/@NameProduct/g,rsp[i].productByProduct.name);
            var description = rsp[i].productByProduct.description;
            if(description.length> 64){
                description = description.slice(0,64)+ " ...";
            }
            product = product.replace(/@Description/g,description);

            var purchase = rsp[i].productByProduct.purchase;
            var saling= rsp[i].productByProduct.selling;

            product = product.replace(/@Price/g,saling);

            product = product.replace(/@Image/,"/images/"+rsp[i].productByProduct.id+"/1.jpg");
//todo у продукта дефалт изображение иначе лишние запросы к серверу
            if(purchase) {

                var profit = saling-purchase;
                product = product.replace(/@Purchase/g, purchase);
                product = product.replace(/@Profit/g,profit);
                product = product.replace(/@Provider/g,rsp[i].providerByProvider.name);

            }

            $("#Products").append(product);
        }


    };
    createCardProduct();

</script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="/js/jquery.js"></script>


    <script src="/js/bootstrap.min.js"></script>

    <title>Вы же не хотите снова простудиться.....</title>

    <link rel="stylesheet" href="/css/bootstrap.css">
    <link rel="stylesheet" href="/css/bootstrap-theme.css">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet">
    <script src="js/Authentication.js"></script>
    <script src="js/adminPanel.js"></script>
    <script src="js/CatalogProducts.js"></script>
</head>

<body>
    <div class="heed">
        <nav class="navbar navbar-inverse" role="navigation">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">


                <div class="navbar-form">
                    <div class="col-lg-4">
                        <span class="col-lg-2 logo">
                            <a href="index.html"> <img src="/svg/oblako.svg" alt="ARCHY" height="87"></a>
                        </span>
                        <div class="col-md-offset-2 col-lg-10">
                            <h2>ОБЛАКО</h2>
                            <h5>интернет магазин</h5>
                        </div>

                        </div>
                    <div class="col-md-4">
                    <form class="form-search-heed" role="search">

                        <div class="form-group">
                            <div class="input-group">
                                <input type="text" class="form-control input-group-prepend" placeholder="">
                                <a href="#" class="input-group-addon"><img src="images/zalupa.svg" alt="&#128270;"></a>
                            </div>
                        </div>
                    </form>
                    </div>
                    <div class="col-md-4 icon-group">
                        <div class="navbar-right">
                       <a href="#" data-target="#myModal" data-toggle="modal"> <img src="images/iconKabinet.svg" alt="ARCHY"  height="40"></a>
                        <img src="images/iconIzbrannoe.svg" alt="ARCHY" height="40" >

                            <div class="basket">
                                <a id="link-naw-bar" href="#">
                                    <img class="img-nav-bar" src="/images/iconKorzina.svg" height="40">
                                    <div class="count_product">100</div>
                                </a>
                            </div><!--
                            <img src="images/iconKorzina.svg" alt="ARCHY" height="40">-->


                        </div>
                    </div>
                    <ul class="nav navbar-nav container">

                        <!--<li class="dropdown" id="registration">
                            <a href="#" class="dropdown-toggle" data-toggle="dropdown">регистрация <b class="caret"></b></a>
                            <ul class="dropdown-menu">

                            </ul>
                        </li>-->

                    <li>
                    </li>
                </ul>
                </div>
            </div><!-- /.navbar-collapse -->
        </nav>



    </div>

    <div class="container" style="margin-top: 0px">

            <div id="carousel" class="carousel slide " data-ride="carousel" style="display: inline-block;">
                <!-- Индикаторы -->
                <ol class="carousel-indicators">

                </ol>
                <div class="carousel-inner">

                </div>
                <!-- Элементы управления -->
                <a class="left carousel-control" href="#carousel" role="button" data-slide="prev">

                </a>
                <a class="right carousel-control" href="#carousel" role="button" data-slide="next">

                </a>
            </div>



        </div>


    <div class="">
        <div class="col-md-2 menu">
            <div class="text-center" id="content_table">

                <div class="content">

                </div>

            </div>
        </div>
        <div class="col-md-8 news" id="body_table">

        </div>
        <div class="col-md-2 promo">
            Обновления:
        </div>
    </div>

    <!-- Модальное окно -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title auth" id="myModalLabel">Вход</h4>
                    <h4 class="modal-title lk" >Кабинет</h4>
                    <h4 class="modal-title reg">Регистрация</h4>

                </div>

                <div class="auth">
                    <form id="authentication" action="javascript:void(null);" onsubmit="authentication()" method="Post">
                    <div class="modal-body">

                            mail:<br>
                            <input type="text" name="login"><br>
                            пароль:<br>
                            <input type="password" name="password">

                    </div>
                        <div class="modal-footer">
                            <button type="button" onclick="regAuth()" class="btn btn-default">Регистрация</button>
                            <button type="submit" class="btn btn-default" >войти</button>
                        </div>

                    </form>
                </div>

                <div class="reg">

                    <form action="javaScript:void(null)" onsubmit="registration()" id="regForm" method="get">
                        <div class="modal-body">

                            email:<br>
                            <input type="text" id="regName" name="login"><br>
                            пароль:<br>
                            <input type="password" id="regPassword" name="password"><br>
                            повторите пароль:<br>
                            <input type="password" id="regRePassword" name="repassword">

                        </div>
                        <div class="modal-footer">
                            <button type="button" onclick="regAuth()" class="btn btn-default" >Вход</button>
                            <button type="submit" class="btn btn-default">регистрировать</button>
                        </div>

                    </form>

                </div>

                <div class="lk">
                    <div class="media-body">
                        <ul>
                            <li><a href="#" onclick="adminLoad()" id="admin" data-dismiss="modal" style="display: none"> Админка </a></li>
                            <li><a id="profile" href="#" data-dismiss="modal">Профиль</a></li>
                            <li><a href="#" onclick="logout()" data-dismiss="modal"> Выход </a></li>
                        </ul>
                    </div>
                </div>


            </div>
        </div>
    </div>


</body>

</html>
<script>
    auth();
    window.onload = function (ev){
        loadContent("html/AllProduct.html",hideButton);
    };

    var  registration = function () {

        var login = $("#regName").val();
        var password = $("#regPassword").val();
        var rePassword = $("#regRePassword").val();

        var request = {"login":login , "password": password};
        var msg="request="+JSON.stringify(request);
        console.log(msg);

        $.ajax({
            type: 'POST',
            url: '/registration',
            data: msg,
            success: function(data) {

                response=data;
                //location.reload();
            },
            error:  function(xhr, str){
                console.log('Возникла ошибка: ' + xhr.responseCode);
            }
        });
        $("#myModal").css("display","none");
    };
    var f = true;
    var regAuth = function () {
        if(f){
            console.log("reg");
            $(".auth").css("display","none");
            $(".reg").css("display","block");
            f=false;
        }else{
            console.log("auth");
            $(".reg").css("display","none");
            $(".auth").css("display","block");
            f=true;
        }
    }

    var loadCarousel = function(){
        var container = $("#carousel");
        if(container != null){

            $.ajax({
                type: 'POST',
                url: '/select.carousel',
                dataType: "json",
                success: function(data) {

                    var response= data.carouselImages;
                    var flag = true;
                    if (response.length===0){
                        container.css("display","none");
                    }
                    for(var i=0; i<response.length; i++){
                        if(flag){

                            container.find(".carousel-indicators").append(
                                "<li data-target=\"#carousel\" class=\"active\" data-slide-to=\"" + i + "\"></li>"
                            );

                            container.find(".carousel-inner").append(
                                "<div class=\"item active\">\n" +
                                "\n" +
                                "                            <img src=\"" + response[i] + "\" width=\"100%\" alt=\"...\">\n" +
                                "\n" +
                                "                    </div>"
                            );
                        }else {
                            container.find(".carousel-indicators").append(
                                "<li data-target=\"#carousel\" data-slide-to=\"" + i + "\"></li>"
                            );

                            container.find(".carousel-inner").append(
                                "<div class=\"item\">\n" +
                                "\n" +
                                "                            <img src=\"" + response[i] + "\" width=\"100%\" alt=\"...\">\n" +
                                "\n" +
                                "                    </div>"
                            );
                        }
                        console.log(response[i]);
                        flag = false;
                    }


                },
                error:  function(xhr, str){
                    console.log('Возникла ошибка: ' + xhr.responseCode);
                }
            });

        }
    };
    loadCarousel();
</script>